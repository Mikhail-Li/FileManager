# MiLiFileManager
## Консольный файловый менеджер начального уровня

Предназначен для работы с файлами и каталогами через коммандную строку. 

#### Функционал:
1. Просмотр структуры каталогов и файлов с постраничным выводом.
2. Навигация по файловой системе.
3. Создание, удаление, копирование, перемещение, переименование файлов и каталогов.
4. Получение информации о размерах, системных атрибутов файлов и каталогов.
5. Поиск файлов и каталогов по имени.
6. Вывод сообщений о результатах выполнения комманд в консоль.
7. Настройка вывода количества строк на страницу для вывода дерева каталогов и файлов.
8. Сохранение ошибок в log-файл.
9. Список и описание комманд с возможностью вызова пользователем.
10. Сохранение последнего состояния(настроек) при выходе из программы.

#### Алгоритм работы:
При запуске загружаются конфигурационные параметры из файла config.xml. Конфигурационные параметры определяют размер окна консоли, размеры полей в консольном менеджере, текущий каталог и содержимое в блоке информации (MiLiFm.jpg). Если файл не найден или поврежден - загружаются настройки по-умолчанию.

![Screenshot](/MiliFileManager/MiLiFM.jpg)

Интерфейс состоит из области дерева каталогов (Tree Area), области сообщений (Message Area), области информации (Info Area). 
Содержимое Tree Area соответствует ссылке - Path Dir for Tree. Дерево каталогов и файлов в 2-х уровневом исполнении с пейджингом.
Содержимое Info Area соответсвует ссылке Path Dir for Info Area. В данной области выводится подробная информация о файле или каталоге (размер, имя, атрибуты, даты создания, изменения, последнего доступа и др. параметры), указанном в ссылке над Info Area.
В области сообщений выводятся сообщения о результатах выполнения команд или, по запросу пользователя, список или описание команд. 
В коммандной строке  отображается текущий (активный) каталог сurDir.

Для обеспечения ввода-вывода конфигурационных параметров используется класс IOData c 2 метродами: GetConfig - загрузка параметров и SetConfig - сохранение параметров в файлс ипользованем XML-сериализации. Поля класса - перечень конфигурационных параметров. Конструктор по умолчанию.

Пользовательское управление основано на командах - запросах построенных в соответсвии с синтаксисом. Перечень возможных команд с описанием и синтаксисом представлен ниже. 
Команды полученные от пользователя передаются в соответствующие методы класса FileManager в виде экземпляра класса Commands. Методы совершают действие, в случае необходимости выводят в окне Message Area сообщение об успешном выполнении команды или об ошибке (перечень сообщений приведен ниже). Возникающие исключения записываются в  файл error.log.  

В классе Сommands определены поля необходимые для обеспечения функционала файлового менеджера. Конструктор по умолчанию.
Поля Syntax (синтаксис) и Description (описание) предназначены для использования функции справки (help). 
При запуске программы происходит формирование списка объектов типа Commands с заполненными полями Command, Syntax и Description из файла commands.xml с использованием xml-десериализации. 

При завершении работы программы происходит перезапись параметров в экземпляре класса IOData на текущие: curDir, InfoPath(Path Dir for Info Area) и NumberOfLine. Впоследствии данные сериализуются и записываются в config.xml.

*_для корректной работы необходимо после сборки проекта поместить файл конфигурации **config.xml**  и фаил справки команд **commands.xml** в папку      ..\MliFileManager\bin\Debug\netcoreapp3.1_

#### Список команд:
1.	**cd**	<_path/name_>	Смена текущего каталога. Можно использовать полный путь к каталогу <_path_> или имя каталога <name>в текущем каталоге. Вместо <_path/name_> может быть указано <_.._> - переход в родительский каталог (на 1 каталог вверх),  <_root_> - переход в корневой каталог.
2.	**list** или **ls** <_path_>* <_att_>* <_page_> *	Просмотр содержимого каталога. Если путь не указан - выводится содержимое текущего каталога. Параметр <_att_> может иметь значение <_-p_> - постраничный вывод. Если <_p_> не указан, то выводится последняя страница. Параметр  <_page_> используется вместе с  <_att_> и выводит в окно дерева указанную страницу. Если указан <_att_> без <_page_>, то реализуется вывод всех страниц по нажатию любой клавиши. 
3.	**copy** или **cp**	<_source/name_> <_target_>*	Копирование файлов и каталогов. Параметр <_source_> - полный путь к файлу или каталогу. Параметр <_name_> - имя файла или каталога в текущем каталоге. Параметр <_target_> - полный путь копии. Eсли указан <_target_>, то параметр <_source_> тоже должен быть указан. Если <_target_> отсутствует , то создается копия файла или каталога с добавлением порядкового номера в скобках - (n) - в текущем каталоге (<_name_>) или по указанному пути (<_source_>). 
4.	**rm**	<_path/name_>	Удаление файла. Паравметр <_path_> - полный путь к удаляемому файлу,  <_name_> - имя файла в текущем каталоге.
5.	**rmdir**	<_path/name_>	Удаление каталога в т.ч. рекурсивное. Паравметр <_path_> - полный путь к удаляемому каталогу,  <_name_> - имя каталога в текущем каталоге. 
6.	**mkdir**	<_path/name_>	Создание каталога. Паравметр <_path_> - полный путь к создаваемому каталогу,  <_name_> - имя нового каталога в текущем каталоге. Если каталог с указанным именем существует, то создается копия каталога с добавлением порядкового номера в скобках - (n).
7.	**touch**	<_path/name_>	Создание файла. Паравметр <_path_> - полный путь к создаваемому файлу,  <_name_> - имя нового файла в текущем каталоге. Если файл с указанным именем существует, то создается копия файла с добавлением порядкового номера в скобках - (n).
8.	**move** или **mv**	<_source_> <_target_>	Перемещение файлов и каталогов. Параметр <source> - полный путь к файлу или каталогу. Параметр <_target_> - полный путь назначения для файла или каталога. 
9.	**rename** или **nm**	<_source/name_> <_target/name_>	Переименование файлов и каталогов. Параметр <_source_> - полный путь к файлу или каталогу. Параметр <_name_> - имя файла или каталога (старое и новое) в текущем каталоге. Параметр <_target_> - полный путь каталога с новым именем. Eсли указан <source>, то должен быть указан параметр <_target_>. Если указаны параметры <_name_> , то переименовать можно объект в текущем каталоге.
10.	**find** или **fd**	<_name_>	Поиск файла или каталога по имени в текущем каталоге и во всех подкаталогах. Выводит нумерованный список полных путей найденных файлов.
11.	**info**	<_path_>*	Вывод информации о файле или каталоге в блок инфоромации. Параметр <_path_> - полный путь к файлу или каталогу. Если <_path_> не указан - то выводится информация текущего каталога. 
12.	**help** или **h** <_command_>*	Вывод информации о коммандах в окне сообщений. Если параметр <_command_> не указан, то выводится список всех комманд с синтаксисом постранично. Если указана комманда - то краткое описание комманды. 
13. **config**	<_att_> <_number_>*	Позволяет узнать или поменять заданое количество строк на странице при выводе дерева файловой системы. Параметр <_att_> имеет 2 значения: <_-i_> - информация, <_-c_> - конфигурирование. Параметр <_number_> -  задает количество строк при использовании параметра <_-c_>.

  _Примечания_:
  1. _*_ помечены параметры c вариативным указанием.
  2. path/name - запись означает, что можно указывать как полный путь, так и имя.
  3. При составлении комманды символы <  > не указываются.
  4. **В качестве разделителя используется пробел.** 

#### Перечень сообщений
_CODE:	Message_
- 6:	Файл commands.xml не найден. Список команд и описание команд не доступны. За помощью обратитесь к разработчику. Для выхода из программы команда q или quit.
- 7:	При выполнении команды зафиксирована ошибка. Информация об ошибке записана в файл _**error.log**_
- 8:	Неверная команда. Список команд - **h** или **help**. Описание команды - **h** <_команда_> или **help** <_команда_>."
- 10:	Неверный синтаксис команды.
- 11:	Не указан путь или имя. Повторите ввод.
- 12:	Неверный путь в команде. Повторите ввод.
- 21:	Текущая папка - корневой каталог. Переход в каталог верхнего уровня невозможен.
- 22:	Неверное имя папки или путь.
- 23:	Неверная метка тома диска
- 31:	Неверный формат номера страницы.
- 32:	Ваша страница вне диапазона. Показана последняя страница.
- 33:	Ваша страница вне диапазона. Показана первая страница.
- 41:	Каталог успешно скопирован.
- 42:	Файл успешно скопирован.
- 43:	Нельзя скопировать родительский каталог в подкаталог. Повторите ввод.
- 44:	Не указан источник, путь или имя для копирования. Повторите ввод.
- 45:	Каталог назначения не существует. Повторите ввод.
- 46:	Ошибка в пути назначения при копировании файла.
- 51:	Файл не существует.
- 52:	Файл удален.
- 53:	Каталога не существует.
- 54:	Каталог удален.
- 55:	Каталог удален рекурсивно.
- 61:	Ошибка в исходном пути. Повторите ввод.
- 62:	Файл существует в каталоге назначения. Перемещение невозможно.
- 63:	Неверный путь назначения. Повторите ввод.
- 64:	Файл перемещен.
- 65:	Каталог существует в месте назначения. Перемещение невозможно.
- 66:	Каталог перемещен.
- 71:	Фаил переименован.
- 72:	Переименование не осуществимо. Файл с целевым именем существует.
- 73:	Каталог переименован.
- 74:	Переименование не осуществимо. Каталог с целевым именем существует.
- 75:	Ошибка переименования.
- 81:	Каталог создан в текущем каталоге.
- 82:	Каталог создан по указанному пути.
- 83:	Файл создан в текущем каталоге.
- 84:	Файл создан по указанному пути.
- 90:	Файл или каталог не найден в текущем каталоге и подкаталогах.
- 91:	Задано новое количество строк на страницу.
- 92:	Неверный атрибут команды _-i_ - текущеe значениe количества строк на странице. _-с_ <_n_> - заданиие нового (n) значения количества строк."
- 93:	Неверное значение количества строк. Допустимый диапазон значений количества строк - от 1 до <_max_>.
- 94:	Количества строк на странице - <_Value_>. Допустимый диапазон значений количества строк - от 1 до <_max_>.
- 95:	Ошибка команды **config**
- 96:	Ошибка при задании количества строк на странице.
- default:	Неизвестный код сообщения.
